<!doctype html>
<html lang="en">

<head>
    <title>SavedFiles</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="/css/SavedFiles.css">
    <link href="/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
    <link href="css/font-awesome.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Alfa+Slab+One|Audiowide|Passion+One" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Teko" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Glegoo|Teko" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Bowlby+One" rel="stylesheet">
    <meta name="Keywords" content="scc-cpio-1sqqf">
    <link rel="stylesheet" href="/css/addNote.css">
 <link href="https://fonts.googleapis.com/css?family=Coming+Soon" rel="stylesheet">
    <script src="https://use.fontawesome.com/07b0ce5d10.js"></script>

</head>

<body>

    <div class="bg">
        <nav id="header" class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
            <a class="navbar-brand"><img id = "emblem" class="emblem" src="/images/horseshoe.png"></a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item active" style="padding-right:10px;">
                        <a class="nav-link" style="font-size:25px; font-weight:bolder">SAVED FILES</a>
                    </li>
                    <li class="nav-item" style="font-size:25px; font-weight: normal, padding-right:10px;">
                        <a href="#" class="nav-link" data-toggle="modal" data-target="#t_and_c_m2">INFORMATION</a>
                    </li>
                    <li class="nav-item " style=font-size:25px font-weight: normal>
                </ul>
                <form id="SearchWindow" class="form-inline my-2 my-lg-0">
                    <div id="containerForClock" class="container">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="clock text-center">
                                    <span id="hour">24 : </span>
                                    <span id="minute">00 : </span>
                                    <span id="second">00</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
                <div class="social-container">
                    <ul class="social-icons">
                        <li><a href="/public/Friends.html" data-toggle="tooltip" title="Messanger"><i class="fa fa-envelope"></i></a></li>
                        <li><a href="/public/index.html" data-toggle="tooltip" title="Log out"><i class="fa fa-sign-out"></i></a></li>
                    </ul>
                </div>
                <div class="admin-bar" style="font-size: 22px;">
                    <nav class="nav nav-inline">
                        <a id="emailHeader" class="nav-link" style="color: darkgrey; font-style: italic; font-size: 14px"></a><img id="miniPhoto" src="/images/user.gif" class="img-fluid rounded-circle" id="photoHeader" style="width: 40px; height: 35px; padding-left: 2%">
                    </nav>
                </div>
            </div>
        </nav>
        <div class="modal fade" id="t_and_c_m2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title" id="myModalLabel">uTalk in details:</h4>
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    </div>
                    <div class="modal-body">
                        <div style="display: flex; flex-direction:column; height: 500px;">
                            <p><img src="/images/MainLogo.png" alt="main_logo" style="width: 40%; height: 45%; margin-left: 30%;">
                                <div>
                                    uT (uTalk; Ukrainian: Ютолк, meaning YouTellSmbdSmth) is a Ukrainian-based online social networking service. It is available only in the English language, thougth it was created for native speakers of Ukraine. It is especially popular among English-speaking users. uTalk allows users to message each other privately, share and tag images, audio and video, and to make new friends. It is based in Lviv, Ukraine.
                                </div>
                        </div>
                        <div class="modal-footer" style="margin-top: -10%;">
                            <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div style="display: flex; margin-top: 2%;">
            <div>
                <nav class="main-menu">
                    <ul>
                        <li>
                            <a href="/public/profile.html">
                    <i class="fa fa-home fa-2x"></i>
                        <span class="nav-text">Profile</span>
                </a>
                        </li>
                        <li class="has-subnav">
                            <a href="/public/Friends.html">
                    <i class="fa fa-envelope fa-2x"></i>
                        <span class="nav-text">Messanger</span>
                </a>
                        </li>
                        <li class="has-subnav">
                            <a href="/public/Settings_Of_Page.html">
                      <i class="fa fa-gears fa-2x"></i>
                    <span class="nav-text">Settings of page</span>
                </a>
                        </li>
                        <li class="has-subnav">
                            <a href="/public/SavedFiles.html" style="color: white">
                   <i class="fa fa-folder-open fa-2x"></i>
                    <span class="nav-text">Saved Files</span>
                </a>
                        </li>
                        <li>
                            <a href="/public/PhotoPage.html">
                    <i class="fa fa-camera-retro fa-2x"></i>
                    <span class="nav-text">Photos</span>
                </a>
                        </li>
                        <li>
                            <a href="/public/Planner.html">
                   <i class="fa fa-table fa-2x"></i>
                    <span class="nav-text">Plans-Helper</span>
                </a>
                        </li>
                        <li>
                            <a href="/public/VisitGalleryOfFriend.html">
                    <i class="fa fa-photo fa-2x"></i>
                    <span class="nav-text">Gallery</span>
                </a>
                        </li>
                        <li>
                            <a href="/public/Documentation.html">
                   <i class="fa fa-info fa-2x"></i>
                    <span class="nav-text">Documentation</span>
                </a>
                        </li>
                    </ul>
                    <li>
                        <a href="/public/page">
                         <i class="fa fa-power-off fa-2x"></i>
                        <span class="nav-text" style="color: red; font-weight: bold ">Logout</span>
                    </a>
                    </li>
                </nav>
            </div>


            <div id="centralArea" style="height: 450px; width: 40%px; margin-left: 2%;">
                <div class="content">
                    <img src="/images/settings.png" alt="" style="width: 5%; height: 5%; margin: auto; margin-bottom: 2%">
                    <div class="random"><span class="nbr ltr">0</span><span class="nbr ltr">0</span><span class="nbr ltr">0</span><span class="nbr ltr">0</span><span class="nbr ltr">0</span>
                        <span class="nbr ltr">0</span><span class="nbr ltr">0</span><span class="nbr ltr">0</span><span class="nbr ltr">0</span><span class="nbr ltr">0</span><span class="nbr ltr">0</span><span class="nbr ltr">0</span><span class="nbr ltr">0</span><span class="nbr ltr">0</span><span class="nbr ltr">0</span><span class="nbr ltr">0</span><span class="nbr ltr">0</span><span class="nbr ltr">0</span><span class="nbr ltr">0</span><span class="nbr ltr">0</span><span class="nbr ltr">0</span><span class="nbr ltr">0</span><span class="nbr ltr">0</span><span class="nbr ltr">0</span><span class="nbr ltr">0</span><span class="nbr ltr">0</span><span class="nbr ltr">0</span><span class="nbr ltr">0</span><span class="nbr ltr">0</span><span class="nbr ltr">0</span><span class="nbr ltr">0</span><span class="nbr ltr">0 </span><span class="nbr ltr">0 </span><span class="nbr ltr">0</span><span class="nbr ltr">0</span><span class="nbr ltr">0</span><span class="nbr ltr">0</span><span class="nbr ltr">0</span><span class="nbr ltr">0</span><span class="nbr ltr">0</span></div>
                </div>
                <script src='https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js'></script>
                <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>

            </div>
        </div>
    </div>

   <footer class="myfooter">
    <div class="container">
        <div class="row">
            <div class="col-sm-3">
                <h4 class="title-widget">Quick Links</h4>
                <p>Use these useful links to go to the other online services quickly and without any additional actions</p>
                <ul class="social social-circle">
                    <li onclick="openInNewTab('https://www.instagram.com/?hl=ru')"><a class="icoInstagram"><i class="fa fa-instagram" aria-hidden="true"></i></a></li>
                    <li onclick="openInNewTab('https://www.facebook.com/')"><a class="icoFacebook"><i class="fa fa-facebook-official" aria-hidden="true"></i></a></li>
                    <li onclick="openInNewTab('https://www.google.com.ua/?hl=ru')"><a class="icoGoogle"> <i class="fa fa-google"></i></a></li>
                    <li onclick="openInNewTab('https://www.youtube.com/')"><a class="icoYouTube"> <i class="fa fa-youtube"></i></a></li>
                </ul>
            </div>
            <div id="blocksOfFooter" class="col-sm-3">
                <h4 class="title-widget">My Account</h4>
                <span class=" social acount-icon">          
                        <a href="/public/profile.html" ><i class="icoFacebook fa fa-user-circle-o" aria-hidden=true></i>My Profile</a>
                        <a href="/public/Friends.html" ><i class="fa fa-users" aria-hidden="true"></i>My friends</a>
                        <a href="/public/Settings_Of_Page.html"><i class="fa fa-cogs" aria-hidden="true"></i>Settings</a>
                        
                        <script>function openInNewTab(url) {
                            var win = window.open(url, '_blank');
                            win.focus();
                        }</script>

					</span>
            </div>
            <div id="blocksOfFooter" class="col-sm-3">
                <h4 class="title-widget">Useful bookmarks</h4>
                <div id="category" class="category"></div>
                <div id="addBlockForFooter" class="col-xs-12 col-md-12">

                    <div class="container" id="footerBtnFlex" style="margin-top: 5%; margin-right: 10%; color: #fff">
                        <button id="searchBtn" type="button" style="cursor: pointer; box-shadow: 0 0 10px rgba(0,0,0,0.5); border-radius: 5px;"><a class="btn icon-btn btn-success" class=" col-md-6 col-xl-3"><i class="fa fa-plus-square fa-2x"></i></a></button>
                        <button id="removeAllBtn" type="button" style="cursor: pointer; box-shadow: 0 0 10px rgba(0,0,0,0.5); border-radius: 5px;"><a class="btn icon-btn btn-danger" class=" col-md-6" ><i class="fa fa-trash fa-2x"></i></a></button>
                    </div>
                    <div>
                        <input id="input" style="width: 100%; box-shadow: 0 0 10px rgba(0,0,0,0.5); /* Параметры тени */" placeholder="New link" type="text" class="form-control">
                    </div>
                    <div>
                        <input id="input2" style="width: 100%; box-shadow: 0 0 10px rgba(0,0,0,0.5); /* Параметры тени */" placeholder="Name" type="text" class="form-control">
                    </div>
                </div>
            </div>
            <div id="blocksOfFooter" class="col-sm-3">
                <h4 class="title-widget">Your notes</h4><div>
                <textarea id="textAreaFooter" placeholder="Type your note in this area: " style="font-family: 'Coming Soon', cursive; font-size: 25px; background-color:#919497; width: 100%; border-radius: 5px; box-shadow: 0 0 10px rgba(0,0,0,0.5);" name="Text1" id="fieldForText" cols="15" rows="4"></textarea>
                </div>
            </div>
        </div>
        <hr>
        <div class="row text-center" id="creatorText"> Created, developed and designed by Khanas Vasyl</div>
    </div>
</footer>

<script>
    
      /////////////////////////////////////////////////////////DISPLAY MAIN PHOTO ////////////////////////////////////////////////////////////
                               
                                var avatarIdRequest = {
                                     id : localStorage.getItem("idCurrentUser")
                                }
                                 
                                 $.ajax({
                                    url: "http://localhost:8080/avatar/select",
                                    type: "POST",
                                    headers: {
                                        'Authorize' : "Bearer " + localStorage.getItem('token')
                                    },
                                    'contentType' : "application/json",
                                    "dataType": "json",
                                    'data': JSON.stringify(avatarIdRequest),
                                    success: function(data) {
                                        if(data != null){
                                            var str1PhotoSrc = "img/";
                                            var str2PhotoSrc = data.photo;
                                            var str3PhotoSrc = str1PhotoSrc.concat(str2PhotoSrc);
                                            $("#miniPhoto").attr("src", str3PhotoSrc);
                                        }
                                    },
                                    error: function(error) {
                                        console.log(error);
                                    }
                                });
      
    
      /////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////DISPLAY-NOTE ++ ///////////////////////////////////////////////////////
     /////////////////////////////////////////////////////////////////////////////////////////////////////////////////
     
    var noteRequest = {
        id: localStorage.getItem("idCurrentUser")
    }

    $.ajax({
        url: "http://localhost:8080/note/selectOne",
        type: "POST",
        headers: {
            'Authorize' : "Bearer " + localStorage.getItem('token'),
        },
        'contentType' : "application/json",
        "dataType": "json",
        'data': JSON.stringify(noteRequest),
        success: function(data) {
            $("#textAreaFooter").val(data.text);
        },
        error: function(error) {
            console.log(error);
        }
    });

///////////////////////////////////////////////////////////SAVE-NOTE ++ ///////////////////////////////////////////////////////////////////
   
    $("#textAreaFooter").focusout(function(){
        
        var note = {
            text: $("#textAreaFooter").val(),
            idUser: localStorage.getItem("idCurrentUser")
        }
           
        var urlFirstPart = "http://localhost:8080/note/";
        var urlSecondPart = localStorage.getItem("idCurrentUser");
        var urlFull = urlFirstPart.concat(urlSecondPart);

        $.ajax({
            'url': urlFull,
            'type': "PUT",
            headers: {
                'Authorize' : "Bearer " + localStorage.getItem('token'),
            },
            'contentType' : "application/json",
            "dataType": "json",
            'data': JSON.stringify(note),
            'success': function(data) {
                console.log(data);
                $("#textAreaFooter").val(data.text);
            },
            'eror': function(error) {
                alert("ERROR");
            }
        });

///////////////////////////////////////////////////////////DISPLAY-NOTE-x2 ++ //////////////////////////////////////////////////////////////////
        
        var noteRequest = {
            id: localStorage.getItem("idCurrentUser")
        }

        $.ajax({
            url: "http://localhost:8080/note/selectOne",
            type: "POST",
            headers: {
                'Authorize' : "Bearer " + localStorage.getItem('token')
            },
            'contentType' : "application/json",
            "dataType": "json",
            'data': JSON.stringify(noteRequest),
            success: function(data) {
                $("#textAreaFooter").val(data.text);
            },
            error: function(error) {
                console.log(error);
            }
        });
    });
    
///////////////////////////////////////////////////////////DISPLAY-BOOKMARKS ++ ////////////////////////////////////////////////////////////
     var idCurrent = localStorage.getItem("idCurrentUser");
     
    var book = {
       id: idCurrent
    }

    $.ajax({
        url: "http://localhost:8080/bookmark/selectOne",
        type: "POST",
        headers: {
            'Authorize' : "Bearer " + localStorage.getItem('token')
        },
        'contentType' : "application/json",
        "dataType": "json",
        'data': JSON.stringify(book),
        success: function(data) {
            for (var i = 0; i < data.length; i++) {
                var element = document.createElement("a");
                element.setAttribute('class', "aLink");
                element.setAttribute('href', data[i].link);
                element.appendChild(document.createTextNode(data[i].name));
                document.getElementById('category').appendChild(element);
            }
        },
        error: function(error) {
            console.log(error);
        }
    });
     
///////////////////////////////////////////////////////////SAVE-BOOKMARK ++ ////////////////////////////////////////////////////////////////

     
    searchBtn.onclick = function() {
        var idCurrent = localStorage.getItem("idCurrentUser");
        var bookmark = {
            link: $("#input").val(),
            name: $("#input2").val(),
            idUser: idCurrent
        }

        $.ajax({
            'url': "http://localhost:8080/bookmark",
            'type': "POST",
            headers: {
                'Authorize' : "Bearer " + localStorage.getItem('token')
            },
            'contentType' : "application/json",
            "dataType": "json",
            'data': JSON.stringify(bookmark),
            success: function(data) {
                console.log(data);
                $(".aLink").remove();
                 var book = {
                       id: idCurrent
                    }

                    $.ajax({
                        url: "http://localhost:8080/bookmark/selectOne",
                        type: "POST",
                        headers: {
                            'Authorize' : "Bearer " + localStorage.getItem('token')
                        },
                        'contentType' : "application/json",
                        "dataType": "json",
                        'data': JSON.stringify(book),
                        success: function(data) {
                            for (var i = 0; i < data.length; i++) {
                                var element = document.createElement("a");
                                element.setAttribute('class', "aLink");
                                element.setAttribute('href', data[i].link);
                                element.appendChild(document.createTextNode(data[i].name));
                                document.getElementById('category').appendChild(element);
                            }
                        },
                        error: function(error) {
                            console.log(error);
                        }
                    });
                
            },
            'eror': function(error) {
                alert("ERROR");
            }
        });



    }
    
///////////////////////////////////////////////////////////DELETE-BOOKMARKS ++ /////////////////////////////////////////////////////////////

    

   $("#removeAllBtn").click(function(){
       var idUser = localStorage.getItem("idCurrentUser");
       
       var deleteAll = {
             id: idUser
        }
        $.ajax({
            'url': "http://localhost:8080/bookmark/delete",
            'type': "POST",
             headers: {
                'Authorize' : "Bearer " + localStorage.getItem('token')
            },
            'contentType' : "application/json",
            "dataType": "json",
            'data': JSON.stringify(deleteAll),
            'eror': function(error) {
                alert("ERROR");
            }
        });
       $(".aLink").remove();
    });
     
    
    </script>

    <script>
        $(document).ready(function() {

            var $randomnbr = $('.nbr');
            var $timer = 10;
            var $it;
            var $data = 0;
            var index;
            var change;
            var letters = ["T", "h", "i", "s", " ", "p", "a", "g", "e", " ", "i", "s", " ", "s", "t", "i", "l", "l", " ", "u", "n", "d", "e", "r", " ", "d", "e", "v", "e", "l", "o", "p", "m", "e", "n", "t", " ", "!", "!", "!"];

            $randomnbr.each(function() {

                change = Math.round(Math.random() * 100);
                $(this).attr('data-change', change);

            });

            function random() {
                return Math.round(Math.random() * 9);
            };

            function select() {
                return Math.round(Math.random() * $randomnbr.length + 1);
            };

            function value() {
                $('.nbr:nth-child(' + select() + ')').html('' + random() + '');
                $('.nbr:nth-child(' + select() + ')').attr('data-number', $data);
                $data++;

                $randomnbr.each(function() {
                    if (parseInt($(this).attr('data-number')) > parseInt($(this).attr('data-change'))) {
                        index = $('.ltr').index(this);
                        $(this).html(letters[index]);
                        $(this).removeClass('nbr');
                    }
                });

            };

            $it = setInterval(value, $timer);

        });
        
        ///////////////////////////////////////////////////////////DISPLAY-USER-REGISTER ++ ////////////////////////////////////////////////////////
    
    var urlFirstPart = "http://localhost:8080/user/get/by/";
        var urlSecondPart = localStorage.getItem("idCurrentUser");
        var urlFull = urlFirstPart.concat(urlSecondPart);
    
    $.ajax({
        url: urlFull,
        type: "GET",
        headers: {
                'Authorize' : "Bearer " + localStorage.getItem('token'),
        },
        contentType : "application/json",
        dataType: "json",
        success: function(data) {
            $("#emailHeader").append(data.email);
        },
        'eror': function(error) {
            alert("ERROR");
        }
    });

        
        
        
        
    </script>

    <script>
        function setDate() {
            // get current date
            const now = new Date();
            // get seconds, minutes and hours
            var seconds = "0" + now.getSeconds();
            var minutes = "0" + now.getMinutes();
            var hours = "0" + now.getHours();

            //change html clock time

            document.getElementById('second').innerHTML = seconds.slice(-2);
            document.getElementById('minute').innerHTML = minutes.slice(-2) + " : ";
            document.getElementById('hour').innerHTML = hours.slice(-2) + " : ";
        }

        setInterval(setDate, 1000);

        $(document).ready(function() {
            $('.menu li:has(ul)').hover(function(e) {
                e.preventDefault();
                if ($(this).hasClass('activado')) {
                    $(this).removeClass('activado');
                    $(this).children('ul').slideUp();
                } else {
                    $('.menu li ul').slideUp();
                    $('.menu li').removeClass('activado');
                    $(this).addClass('activado');
                    $(this).children('ul').slideDown();
                }
            });
        });
    </script>

    <script>
        function myFunction() {
            var inputText = document.getElementById("input").value;
            var inputText2 = document.getElementById("input2").value;
            var element = document.createElement("a");
            element.setAttribute('href', inputText);
            element.appendChild(document.createTextNode(inputText2));
            document.getElementById('category').appendChild(element);
        }

        function clearThis(target) {
            if (target.value != null) {
                target.value = "";
            }
        }
    </script>


    <script>
        try {
            Typekit.load({
                async: true
            });
        } catch (e) {}

        $(function() {
            function getParameterByName(name, url) {
                if (!url) {
                    url = window.location.href;
                }
                name = name.replace(/[\[\]]/g, "\\$&");
                var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                    results = regex.exec(url);
                if (!results) return null;
                if (!results[2]) return '';
                return decodeURIComponent(results[2].replace(/\+/g, " "));
            }
            if (getParameterByName('email') == "success") {
                //make message permanent
                // alert("Contact was made!\nWe will get back to you as soon as possible.");
                document.getElementById("mailer").style.pointerEvents = "none";
                document.getElementById("mailer").style.filter = "blur(2px)";
                document.getElementById("contactwas").style.display = "block";
                //clear url

            }
        });
    </script>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>

</body>

</html>