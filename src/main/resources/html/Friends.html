<!doctype html>
<html lang="en">

<head>
    <title>Friends</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="css/Friends.css">
    <!-- Bootstrap CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
    <link href="css/font-awesome.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Anton|Francois+One" rel="stylesheet">
    <link rel="stylesheet" href="css/addNote.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://use.fontawesome.com/07b0ce5d10.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Alfa+Slab+One|Audiowide|Passion+One" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Bungee+Inline" rel="stylesheet">
   <link href="https://fonts.googleapis.com/css?family=Coming+Soon" rel="stylesheet">
     <link href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans+Condensed" rel="stylesheet">
</head>

<body>
    <div class="bg">
        <nav id="header" class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
            <a class="navbar-brand"><img id = "emblem" class="emblem" src="images/horseshoe.png"></a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item active" style="padding-right:10px;">
                        <a class="nav-link" style="font-size:25px; font-weight:bolder">MESSANGER</a>
                    </li>
                    <li class="nav-item" style="font-size:25px; font-weight: normal, padding-right:10px;">
                        <a href="#" class="nav-link" data-toggle="modal" data-target="#t_and_c_m2">INFORMATION</a>
                    </li>
                    <li class="nav-item " style=font-size:25px font-weight: normal>
                </ul>
                <form id="SearchWindow" class="form-inline my-2 my-lg-0">
                    <div id="containerForClock" class="container">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="clock text-center">
                                    <span id="hour">24 : </span>
                                    <span id="minute">00 : </span>
                                    <span id="second">00</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
                <div class="social-container">
                    <ul class="social-icons">
                        <li><a href="Friends.html" data-toggle="tooltip" title="Messanger"><i class="fa fa-envelope"></i></a></li>
                        <li><a href="index.html" data-toggle="tooltip" title="Log out"><i class="fa fa-sign-out"></i></a></li>
                    </ul>
                </div>
                <div class="admin-bar" style="font-size: 22px;">
                    <nav class="nav nav-inline">
                        <a id="emailHeader" class="nav-link" style="color: darkgrey; font-style: italic; font-size: 14px"></a><img src = "images/user.gif" id="miniPhoto" class="img-fluid rounded-circle" style="width: 40px; height: 35px; padding-left: 2%">
                    </nav>
                </div>
            </div>
        </nav>
        <div class="modal fade" id="t_and_c_m2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title" id="myModalLabel">uTalk in details:</h4>
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    </div>
                    <div class="modal-body">
                        <div style="display: flex; flex-direction:column; height: 500px;">
                            <p><img src="images/MainLogo.png" alt="main_logo" style="width: 40%; height: 45%; margin-left: 30%;">
                                <div>
                                    uT (uTalk; Ukrainian: Ютолк, meaning YouTellSmbdSmth) is a Ukrainian-based online social networking service. It is available only in the English language, thougth it was created for native speakers of Ukraine. It is especially popular among English-speaking users. uTalk allows users to message each other privately, share and tag images, audio and video, and to make new friends. It is based in Lviv, Ukraine.
                                </div>
                        </div>
                        <div class="modal-footer" style="margin-top: -10%;">
                            <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div style="display: flex; margin-top: 2%;">

            <div>
                <nav class="main-menu">
                    <ul>
                        <li>
                            <a href="profile.html">
                    <i class="fa fa-home fa-2x"></i>
                        <span class="nav-text">Profile</span>
                </a>
                        </li>
                        <li class="has-subnav">
                            <a href="Friends.html" style="color: white">
                    <i class="fa fa-envelope fa-2x"></i>
                        <span class="nav-text">Messanger</span>
                </a>
                        </li>
                        <li class="has-subnav">
                            <a href="Settings_Of_Page.html">
                    <i class="fa fa-gears fa-2x"></i>
                    <span class="nav-text">Settings of page</span>
                </a>
                        </li>
                        <li class="has-subnav">
                            <a href="SavedFiles.html">
                   <i class="fa fa-folder-open fa-2x"></i>
                    <span class="nav-text">Saved Files</span>
                </a>
                        </li>
                        <li>
                            <a href="PhotoPage.html">
                    <i class="fa fa-camera-retro fa-2x"></i>
                    <span class="nav-text">Photos</span>
                </a>
                        </li>
                        <li>
                            <a href="Planner.html">
                   <i class="fa fa-table fa-2x"></i>
                    <span class="nav-text">Plans-Helper</span>
                </a>
                        </li>
                        <li>
                            <a href="VisitGalleryOfFriend.html">
                    <i class="fa fa-photo fa-2x"></i>
                    <span class="nav-text">Gallery</span>
                </a>
                        </li>
                        <li>
                            <a href="Documentation.html">
                   <i class="fa fa-info fa-2x"></i>
                    <span class="nav-text">Documentation</span>
                </a>
                        </li>
                    </ul>
                    <li>
                        <a href="index.html">
                         <i class="fa fa-power-off fa-2x"></i>
                        <span class="nav-text" style="color: red; font-weight: bold ">Logout</span>
                    </a>
                    </li>
                </nav>
            </div>

            <div id="flexBoxContent">
            <div class="chat_window">
                <div class="top_menu">
                    <div class="buttons" style="width: 40%;">
                       <button id="removeBesida" style="background-color: #FF4900; border-radius: 25px; width: 28%; height: 30px; color: #fff; font-weight: bold;">delete</button>
                        <button style="background-color: #316589; border-radius: 50%; width: 30px; height: 28px;"></button>
                        <button style="background-color: #0BC15B;  border-radius: 50%; width: 30px; height: 28px;"></button>
                        
                    </div>
                    <div class="title">Chat</div>
                </div>
                <ul class="event-list" id="messages"> 
                    <h3 id="hoverBackgroundTextChat">Please, choose chat with any user from search window of users</h3>    
                </ul>
                
                <div class="bottom_wrapper clearfix" style="display: flex;">
                    <div class="message_input_wrapper"><input class="message_input" id="sendNewMessageInput" placeholder="Type your message here..."></div>  
                         
                              <button id="sendMessageBtn"><p>Send</p></button>               
                         
                </div>
            </div>
            
            <div id="container">

                <ul id="tabs">
                    <li id="all" class="active" style="font-weight: bold">Search of users<i class="fa fa-search fa-2x"></i></li>
                </ul>

                <div id="card">
                   <div id="findFlexBoxStyle">
                    <input id="searchFriend" type="text" placeholder="Name Surname: "><button type="button" id="searchBtn" >Find</button>
                   </div>
                    <div id="main" onmousedown="whichElement(event)">
                        <ul id="users" class="notebook_ul"><h6 id="hoverBackgroundTextSearchUsers">Please, type lastname of your friend
                    </h6></ul>
                    </div>
                </div>
     
            </div>
            </div>  
        </div>
        
        
        
        





    </div>



    <footer class="myfooter">
    <div class="container">
        <div class="row">
            <div class="col-sm-3">
                <h4 class="title-widget">Quick Links</h4>
                <p>Use these useful links to go to the other online services quickly and without any additional actions</p>
                <ul class="social social-circle">
                    <li onclick="openInNewTab('https://www.instagram.com/?hl=ru')"><a class="icoInstagram"><i class="fa fa-instagram" aria-hidden="true"></i></a></li>
                    <li onclick="openInNewTab('https://www.facebook.com/')"><a class="icoFacebook"><i class="fa fa-facebook-official" aria-hidden="true"></i></a></li>
                    <li onclick="openInNewTab('https://www.google.com.ua/?hl=ru')"><a class="icoGoogle"> <i class="fa fa-google"></i></a></li>
                    <li onclick="openInNewTab('https://www.youtube.com/')"><a class="icoYouTube"> <i class="fa fa-youtube"></i></a></li>
                </ul>
            </div>
            <div id="blocksOfFooter" class="col-sm-3">
                <h4 class="title-widget">My Account</h4>
                <span class=" social acount-icon">          
                        <a href="profile.html" ><i class="icoFacebook fa fa-user-circle-o" aria-hidden=true></i>My Profile</a>
                        <a href="Friends.html" ><i class="fa fa-users" aria-hidden="true"></i>My friends</a>
                        <a href="Settings_Of_Page.html"><i class="fa fa-cogs" aria-hidden="true"></i>Settings</a>     
                        
                        <script>function openInNewTab(url) {
                            var win = window.open(url, '_blank');
                            win.focus();
                        }</script>

					</span>
            </div>
            <div id="blocksOfFooter" class="col-sm-3">
                <h4 class="title-widget">Useful bookmarks</h4>
                <div id="category" class="category"></div>
                <div id="addBlockForFooter" class="col-xs-12 col-md-12">

                    <div class="container" id="footerBtnFlex" style="margin-top: 5%; margin-right: 10%; color: #fff">
                        <button id="searchBtn02" type="button" style="box-shadow: 0 0 10px rgba(0,0,0,0.5); border-radius: 5px;"><a class="btn icon-btn btn-success" class=" col-md-6 col-xl-3"><i class="fa fa-plus-square fa-2x"></i></a></button>
                        <button  id="removeAllBtn" type="button" style="box-shadow: 0 0 10px rgba(0,0,0,0.5); border-radius: 5px;"><a  class="btn icon-btn btn-danger" class=" col-md-6" ><i class="fa fa-trash fa-2x"></i></a></button>
                    </div>
                    <div>
                        <input id="input" style="width: 100%; box-shadow: 0 0 10px rgba(0,0,0,0.5); /* Параметры тени */" placeholder="New link" type="text" class="form-control">
                    </div>
                    <div>
                        <input id="input2" style="width: 100%; box-shadow: 0 0 10px rgba(0,0,0,0.5); /* Параметры тени */" placeholder="Name" type="text" class="form-control">
                    </div>
                </div>
            </div>
            <div id="blocksOfFooter" class="col-sm-3">
                <h4 class="title-widget">Your notes</h4><div>
                <textarea id="textAreaFooter" placeholder="Type your note in this area: " style="font-family: 'Coming Soon', cursive; font-size: 25px; background-color:#919497; width: 100%; border-radius: 5px; box-shadow: 0 0 10px rgba(0,0,0,0.5);" name="Text1" id="fieldForText" cols="15" rows="4"></textarea>
                </div>
            </div>
        </div>
        <hr>
        <div class="row text-center" id="creatorText"> Created, developed and designed by Khanas Vasyl</div>
    </div>
</footer>


            <script>
   /////////////////////////////////////////////////////////////////// GET HEADER EMAIL ++ ////////////////////////////////////////////////             
                 var userNow = localStorage.getItem("idCurrentUser");
         
                var str1 = "http://localhost:8080/user/get/by/";
                var str2 = userNow;
                var str3 = str1.concat(str2);
                
                $.ajax({
                    url: str3,
                    type: "GET",
                    headers: {
                        'Authorize' : "Bearer " + localStorage.getItem('token')
                    },
                    contentType: "application/json",
                    success: function(data) {
                        $("#emailHeader").append(data.email);
                        localStorage.setItem("myName",data.firstName);
                        localStorage.setItem("mySurname",data.lastName);
                       
                    },
                    error: function(error) {
                        console.log(error);
                    }
                });
                
      //////////////////////////////////////////////////////////// CHAT ///////////////////////////////////////////////////////////////////          
                var idOtherUser;
                var idConversation;
                var nameOther;
                var MyID = localStorage.getItem("idCurrentUser");
                var MyName = localStorage.getItem("myName");
                var MySurname = " " + localStorage.getItem("mySurname");
                var setOnView = MyName.concat(MySurname);
                
                
        
                searchBtn.onclick = function(){
                    
                     var str1 = $("#searchFriend").val();
                     var strFirstName = str1.split(" ")[0];
                     var strLastName = str1.split(" ")[1];
                        
                    
                    
                        var userId = {
                            firstName : strFirstName,
                            lastName : strLastName
                        }
                    

                $.ajax({
                    url: "http://localhost:8080/user/filter",
                    type: "POST",
                    headers: {
                        'Authorize' : "Bearer " + localStorage.getItem('token')
                    },
                    contentType: "application/json",
                    "dataType": "json",
                    'data': JSON.stringify(userId),
                    success: function(data) {
                            if(data.length != 0){
                                for(var i = 0; i < data.length; i++){
                                    $("#users").append("<li id = 'liList'>" + data[i].lastName + " " + data[i].firstName + "</li>");
                                    idOtherUser = data[i].id;
                                    nameOther = data[i].firstName + " " + data[i].lastName;
                                }
                            }
                    },
                    error: function(error) {
                        alert("There are no users with these name and surname !"); 
                        console.log(error);
                    }
                });    
                    
                }
               
         
                function whichElement(e) {
                    
                var ul = document.getElementById("messages");
                                    ul.innerHTML = "";        
                var targ;
                if (!e) {
                    var e = window.event;
                }
                if (e.target) {
                    targ=e.target;
                } else if (e.srcElement) {
                    targ=e.srcElement;
                }
                var tname = targ.tagName;
                    if(targ.id  == "liList"){
                        
                         var findConvByIds = {
                            "myId": localStorage.getItem("idCurrentUser"),   // Tocken
                            "otherId": idOtherUser
                        }
                         
                        $.ajax({
                            url: "http://localhost:8080/besida/selectOne",
                            type: "POST",
                            contentType: "application/json",
                            headers: {
                                    'Authorize' : "Bearer " + localStorage.getItem('token')
                                },
                            "dataType": "json",
                            'data': JSON.stringify(findConvByIds),
                            success: function(data) {
                                if(data.length != 0){                                   ////// if besida with ids exists////////
                                    for(var i = 0; i < data.length; i++){
                                        idConversation = data[i].id;  
                                    }
                                                        
                                     $("#hoverBackgroundTextChat").hide();

                                     var besidaSpecRequest = {
                                        "idConversation": idConversation
                                     }
                                     
                                     var ul = document.getElementById("users");
                                     ul.innerHTML = "";    
                                     
                                     $.ajax({
                                        url: "http://localhost:8080/sms/selectOne",
                                        type: "POST",
                                        contentType: "application/json",
                                         headers: {
                                            'Authorize' : "Bearer " + localStorage.getItem('token')
                                        },
                                        "dataType": "json",
                                        'data': JSON.stringify(besidaSpecRequest),
                                        success: function(data) {
                                           
                                            for(var i = 0; i < data.length; i++){
                                                if(data[i].authorId != MyID){
                                                     $("#messages").append("<li><div class='info'><h6 class='author' id='effectsOtherMsg'>" + nameOther +"</h6><div class='scrollbar'><p class='messageText'>" + data[i].text + "</p></div></div></li>");    
                                                } else {
                                                    $("#messages").append("<li><div class='info'><h6 class='author' id='effectsAuthorMsg'>" + MyName +"</h6><div class='scrollbar'><p class='messageText'>" + data[i].text + "</p></div></div></li>");    
                                                }
                                               
                                            }
                                        },
                                        error: function(error) {
                                            console.log(error);
                                        }
                                     });
                                    
                                    
                                    ////////////////////////////////////////////////////
                                    ///////////////// sending messages  ////////////////
                                    ////////////////////////////////////////////////////
                                    
                                     sendMessageBtn.onclick = function(){
                                    
                                        var smsText =  $("#sendNewMessageInput").val();
                                         if(smsText == ""){
                                             alert("The text field is empty !");
                                         } else {
                                         
                                    var messageNew = {
                                        "text": $("#sendNewMessageInput").val(),
                                        "conversationId":idConversation,
                                        "authorId": localStorage.getItem("idCurrentUser")
                                    }
                                    
                                    sendNewMessageInput.value = "";

                                    $.ajax({
                                        url: "http://localhost:8080/sms",
                                        type: "POST",
                                        contentType: "application/json",
                                        headers: {
                                            'Authorize' : "Bearer " + localStorage.getItem('token')
                                        },
                                        "dataType": "json",
                                        'data': JSON.stringify(messageNew),
                                        success: function(data) {
                                            
                                                                                            ///////// show Messages in chat-window /////////
                                           
                                            var ul = document.getElementById("messages");
                                            ul.innerHTML = "";    
                                            
                                             var besidaSpecRequest = {
                                                "idConversation": idConversation
                                             }
                                           
                                             $.ajax({
                                                url: "http://localhost:8080/sms/selectOne",
                                                type: "POST",
                                                contentType: "application/json",
                                                headers: {
                                                    'Authorize' : "Bearer " + localStorage.getItem('token')
                                                },
                                                "dataType": "json",
                                                'data': JSON.stringify(besidaSpecRequest),
                                                success: function(data) {
                                                   //success

                                                    for(var i = 0; i < data.length; i++){
                                                        if(data[i].authorId != MyID){
                                                             $("#messages").append("<li><div class='info'><h6 class='author' id='effectsOtherMsg'>" + nameOther +"</h6><div class='scrollbar'><p class='messageText'>" + data[i].text + "</p></div></div></li>");    
                                                        } else {
                                                            $("#messages").append("<li><div class='info'><h6 class='author' id='effectsAuthorMsg'>" + MyName +"</h6><div class='scrollbar'><p class='messageText'>" + data[i].text + "</p></div></div></li>");    
                                                        }

                                                    }
                                               
                                                },
                                                error: function(error) {
                                                    console.log(error);
                                                }
                                             });
                                            
                                            
                                            
                                            
                                        },
                                        error: function(error) {
                                            console.log(error);
                                        }
                                    });
                                    
                                     }
                                    
                                     }
                                     
                                                                                ///////////////////////// delete //////////////////////////
                                     
                                     removeBesida.onclick = function(){
                                         var besidaDeleteRequest = {
                                            idUser: MyID,
                                             idOther: idOtherUser
                                         };
                                         
                                      $.ajax({
                                                url: "http://localhost:8080/besida/delete",
                                                type: "DELETE",
                                                contentType: "application/json",
                                                headers: {
                                                    'Authorize' : "Bearer " + localStorage.getItem('token')
                                                },
                                                "dataType": "json",
                                                'data': JSON.stringify(besidaDeleteRequest),  
                                                error: function(error) {
                                                    console.log(error);
                                                }
                                             });   
                                         alert("deleted !"); 
                                         $("#messages").remove();
                                         location.reload();
                                     }
                                     
                                     
                                }                   // if besida with ids doesn't exist
                                else {
                                    alert("Creating new besida...");
                                        var besida = {
                                                "authorId": localStorage.getItem("idCurrentUser"),
                                                "receiverId":idOtherUser
                                            }
                                        }

                                    $.ajax({
                                        url: "http://localhost:8080/besida",
                                        type: "POST",
                                        contentType: "application/json",
                                        headers: {
                                            'Authorize' : "Bearer " + localStorage.getItem('token')
                                        },
                                        "dataType": "json",
                                        'data': JSON.stringify(besida),
                                        success: function(data) {
                                            alert("created new besida!");
                                            
                                            ////////////////////////Getting sms from new besida/////////////
                                                
                                               var ul = document.getElementById("messages");
                                            ul.innerHTML = "";    
                                            
                                             var besidaSpecRequest = {
                                                "idConversation": idConversation
                                             }
                                           
                                             $.ajax({
                                                url: "http://localhost:8080/sms/selectOne",
                                                type: "POST",
                                                contentType: "application/json",
                                                headers: {
                                                    'Authorize' : "Bearer " + localStorage.getItem('token')
                                                },
                                                "dataType": "json",
                                                'data': JSON.stringify(besidaSpecRequest),
                                                success: function(data) {
                                                   //success

                                                    for(var i = 0; i < data.length; i++){
                                                        if(data[i].authorId != MyID){
                                                             $("#messages").append("<li><div class='info'><h6 class='author' id='effectsOtherMsg'>" + nameOther +"</h6><div class='scrollbar'><p class='messageText'>" + data[i].text + "</p></div></div></li>");    
                                                        } else {
                                                            $("#messages").append("<li><div class='info'><h6 class='author' id='effectsAuthorMsg'>" + MyName +"</h6><div class='scrollbar'><p class='messageText'>" + data[i].text + "</p></div></div></li>");    
                                                        }

                                                    }
                                               
                                                },
                                                error: function(error) {
                                                    console.log(error);
                                                }
                                             });
                                            
                                            
                                            
                                                    
                                    ////////////////////////////////////////////////////
                                    ///////////////// sending messages  ////////////////
                                    ////////////////////////////////////////////////////
                                    
                                     sendMessageBtn.onclick = function(){
                                    
                                    var messageNew = {
                                        "text": $("#sendNewMessageInput").val(),
                                        "conversationId":idConversation,
                                        "authorId": localStorage.getItem("idCurrentUser")
                                    }
                                    
                                    sendNewMessageInput.value = "";

                                    $.ajax({
                                        url: "http://localhost:8080/sms",
                                        type: "POST",
                                        contentType: "application/json",
                                        headers: {
                                            'Authorize' : "Bearer " + localStorage.getItem('token')
                                        },
                                        "dataType": "json",
                                        'data': JSON.stringify(messageNew),
                                        success: function(data) {
                                            
                                                                                            ///////// show Messages in chat-window /////////
                                           
                                            var ul = document.getElementById("messages");
                                            ul.innerHTML = "";    
                                            
                                             var besidaSpecRequest = {
                                                "idConversation": idConversation
                                             }
                                           
                                             $.ajax({
                                                url: "http://localhost:8080/sms/selectOne",
                                                type: "POST",
                                                contentType: "application/json",
                                                headers: {
                                                    'Authorize' : "Bearer " + localStorage.getItem('token')
                                                },
                                                "dataType": "json",
                                                'data': JSON.stringify(besidaSpecRequest),
                                                success: function(data) {
                                                   //success

                                                    for(var i = 0; i < data.length; i++){
                                                        if(data[i].authorId != MyID){
                                                             $("#messages").append("<li><div class='info'><h6 class='author' id='effectsOtherMsg'>" + nameOther +"</h6><div class='scrollbar'><p class='messageText'>" + data[i].text + "</p></div></div></li>");    
                                                        } else {
                                                            $("#messages").append("<li><div class='info'><h6 class='author' id='effectsAuthorMsg'>" + MyName +"</h6><div class='scrollbar'><p class='messageText'>" + data[i].text + "</p></div></div></li>");    
                                                        }

                                                    }
                                               
                                                },
                                                error: function(error) {
                                                    console.log(error);
                                                }
                                             });
                                            
                                            
                                            
                                            
                                        },
                                        error: function(error) {
                                            console.log(error);
                                        }
                                    });
                                    
                                     }
                                   
                                        },
                                        error: function(error) {
                                            console.log(error);
                                        }
                                    });
                                
                            },
                            error: function(error) {
                                console.log(error);
                            }
                        });

                    }            
                }
              ////////////////////////////////////////////// END CHAT /////////////////////////////////////////////////////////////      
                
                 /////////////////////////////////////////////////////////DISPLAY MAIN PHOTO ////////////////////////////////////////////////////////////
                               
                                var avatarIdRequest = {
                                     id : localStorage.getItem("idCurrentUser")
                                }
                                 
                                 $.ajax({
                                    url: "http://localhost:8080/avatar/select",
                                    type: "POST",
                                    headers: {
                                        'Authorize' : "Bearer " + localStorage.getItem('token')
                                    },
                                    'contentType' : "application/json",
                                    "dataType": "json",
                                    'data': JSON.stringify(avatarIdRequest),
                                    success: function(data) {
                                        if(data != null){
                                            var str1PhotoSrc = "img/";
                                            var str2PhotoSrc = data.photo;
                                            var str3PhotoSrc = str1PhotoSrc.concat(str2PhotoSrc);
                                            $("#miniPhoto").attr("src", str3PhotoSrc);
                                        }
                                    },
                                    error: function(error) {
                                        console.log(error);
                                    }
                                });
      
                
                
                
                  /////////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////DISPLAY-NOTE ++ ///////////////////////////////////////////////////////
     /////////////////////////////////////////////////////////////////////////////////////////////////////////////////
     
    var noteRequest = {
        id: localStorage.getItem("idCurrentUser")
    }

    $.ajax({
        url: "http://localhost:8080/note/selectOne",
        type: "POST",
        headers: {
            'Authorize' : "Bearer " + localStorage.getItem('token'),
        },
        'contentType' : "application/json",
        "dataType": "json",
        'data': JSON.stringify(noteRequest),
        success: function(data) {
            $("#textAreaFooter").val(data.text);
        },
        error: function(error) {
            console.log(error);
        }
    });

///////////////////////////////////////////////////////////SAVE-NOTE ++ ///////////////////////////////////////////////////////////////////
   
    $("#textAreaFooter").focusout(function(){
        
        var note = {
            text: $("#textAreaFooter").val(),
            idUser: localStorage.getItem("idCurrentUser")
        }
           
        var urlFirstPart = "http://localhost:8080/note/";
        var urlSecondPart = localStorage.getItem("idCurrentUser");
        var urlFull = urlFirstPart.concat(urlSecondPart);

        $.ajax({
            'url': urlFull,
            'type': "PUT",
            headers: {
                'Authorize' : "Bearer " + localStorage.getItem('token'),
            },
            'contentType' : "application/json",
            "dataType": "json",
            'data': JSON.stringify(note),
            'success': function(data) {
                console.log(data);
                $("#textAreaFooter").val(data.text);
            },
            'eror': function(error) {
                alert("ERROR");
            }
        });

///////////////////////////////////////////////////////////DISPLAY-NOTE-x2 ++ //////////////////////////////////////////////////////////////////
        
        var noteRequest = {
            id: localStorage.getItem("idCurrentUser")
        }

        $.ajax({
            url: "http://localhost:8080/note/selectOne",
            type: "POST",
            headers: {
                'Authorize' : "Bearer " + localStorage.getItem('token')
            },
            'contentType' : "application/json",
            "dataType": "json",
            'data': JSON.stringify(noteRequest),
            success: function(data) {
                $("#textAreaFooter").val(data.text);
            },
            error: function(error) {
                console.log(error);
            }
        });
    });
    
///////////////////////////////////////////////////////////DISPLAY-BOOKMARKS ++ ////////////////////////////////////////////////////////////
     var idCurrent = localStorage.getItem("idCurrentUser");
     
    var book = {
       id: idCurrent
    }

    $.ajax({
        url: "http://localhost:8080/bookmark/selectOne",
        type: "POST",
        headers: {
            'Authorize' : "Bearer " + localStorage.getItem('token')
        },
        'contentType' : "application/json",
        "dataType": "json",
        'data': JSON.stringify(book),
        success: function(data) {
            for (var i = 0; i < data.length; i++) {
                var element = document.createElement("a");
                element.setAttribute('class', "aLink");
                element.setAttribute('href', data[i].link);
                element.appendChild(document.createTextNode(data[i].name));
                document.getElementById('category').appendChild(element);
            }
        },
        error: function(error) {
            console.log(error);
        }
    });
     
///////////////////////////////////////////////////////////SAVE-BOOKMARK ++ ////////////////////////////////////////////////////////////////

     
    searchBtn02.onclick = function() {
        var idCurrent = localStorage.getItem("idCurrentUser");
        var bookmark = {
            link: $("#input").val(),
            name: $("#input2").val(),
            idUser: idCurrent
        }

        $.ajax({
            'url': "http://localhost:8080/bookmark",
            'type': "POST",
            headers: {
                'Authorize' : "Bearer " + localStorage.getItem('token')
            },
            'contentType' : "application/json",
            "dataType": "json",
            'data': JSON.stringify(bookmark),
            success: function(data) {
                console.log(data);
                $(".aLink").remove();
                 var book = {
                       id: idCurrent
                    }

                    $.ajax({
                        url: "http://localhost:8080/bookmark/selectOne",
                        type: "POST",
                        headers: {
                            'Authorize' : "Bearer " + localStorage.getItem('token')
                        },
                        'contentType' : "application/json",
                        "dataType": "json",
                        'data': JSON.stringify(book),
                        success: function(data) {
                            for (var i = 0; i < data.length; i++) {
                                var element = document.createElement("a");
                                element.setAttribute('class', "aLink");
                                element.setAttribute('href', data[i].link);
                                element.appendChild(document.createTextNode(data[i].name));
                                document.getElementById('category').appendChild(element);
                            }
                        },
                        error: function(error) {
                            console.log(error);
                        }
                    });
                
            },
            'eror': function(error) {
                alert("ERROR");
            }
        });



    }
    
///////////////////////////////////////////////////////////DELETE-BOOKMARKS ++ /////////////////////////////////////////////////////////////

    

   $("#removeAllBtn").click(function(){
       var idUser = localStorage.getItem("idCurrentUser");
       
       var deleteAll = {
             id: idUser
        }
        $.ajax({
            'url': "http://localhost:8080/bookmark/delete",
            'type': "POST",
             headers: {
                'Authorize' : "Bearer " + localStorage.getItem('token')
            },
            'contentType' : "application/json",
            "dataType": "json",
            'data': JSON.stringify(deleteAll),
            'eror': function(error) {
                alert("ERROR");
            }
        });
       $(".aLink").remove();
    });
     
            
            
            </script>

    
    

    <script>
        function setDate() {
            // get current date
            const now = new Date();
            // get seconds, minutes and hours
            var seconds = "0" + now.getSeconds();
            var minutes = "0" + now.getMinutes();
            var hours = "0" + now.getHours();

            //change html clock time

            document.getElementById('second').innerHTML = seconds.slice(-2);
            document.getElementById('minute').innerHTML = minutes.slice(-2) + " : ";
            document.getElementById('hour').innerHTML = hours.slice(-2) + " : ";
        }

        setInterval(setDate, 1000);

        $(document).ready(function() {
            $('.menu li:has(ul)').hover(function(e) {
                e.preventDefault();
                if ($(this).hasClass('activado')) {
                    $(this).removeClass('activado');
                    $(this).children('ul').slideUp();
                } else {
                    $('.menu li ul').slideUp();
                    $('.menu li').removeClass('activado');
                    $(this).addClass('activado');
                    $(this).children('ul').slideDown();
                }
            });
        });
    </script>

    
 <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>

   

</body>

</html>